//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Changes to this file will be lost if the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using Havit.Data.EntityFrameworkCore.Patterns.Repositories;
using Havit.Data.EntityFrameworkCore.Patterns.SoftDeletes;
using Microsoft.EntityFrameworkCore;
using DbContext = Havit.Data.EntityFrameworkCore.DbContext;

namespace Havit.EFCoreTests.DataLayer.Repositories;

internal class UserDbRepositoryQueryProvider : IRepositoryQueryProvider<Havit.EFCoreTests.Model.User, System.Guid>
{
	private readonly Func<DbContext, System.Guid, Havit.EFCoreTests.Model.User> _getObjectQuery;
	private readonly Func<DbContext, System.Guid, CancellationToken, Task<Havit.EFCoreTests.Model.User>> _getObjectAsyncQuery;
	private readonly Func<DbContext, System.Guid[], IEnumerable<Havit.EFCoreTests.Model.User>> _getObjectsQuery;
	private readonly Func<DbContext, System.Guid[], IAsyncEnumerable<Havit.EFCoreTests.Model.User>> _getObjectsAsyncQuery;

	public UserDbRepositoryQueryProvider()
	{
		_getObjectQuery = EF.CompileQuery((DbContext dbContext, System.Guid id) => dbContext
			.Set<Havit.EFCoreTests.Model.User>()
			.TagWith("UserDbRepository.GetObject")
			.Where(entity => entity.Id == id)
			.FirstOrDefault());

		_getObjectAsyncQuery = EF.CompileAsyncQuery((DbContext dbContext, System.Guid id, CancellationToken cancellationToken) => dbContext
			.Set<Havit.EFCoreTests.Model.User>()
			.TagWith("UserDbRepository.GetObjectAsync")
			.Where(entity => entity.Id == id)
			.FirstOrDefault());

		_getObjectsQuery = EF.CompileQuery((DbContext dbContext, System.Guid[] ids) => dbContext
			.Set<Havit.EFCoreTests.Model.User>()
			.TagWith("UserDbRepository.GetObjects")
			.Where(entity => ids.Contains(entity.Id)));

		_getObjectsAsyncQuery = EF.CompileAsyncQuery((DbContext dbContext, System.Guid[] ids) => dbContext
			.Set<Havit.EFCoreTests.Model.User>()
			.TagWith("UserDbRepository.GetObjectsAsync")
			.Where(entity => ids.Contains(entity.Id)));
	}

	public Func<DbContext, System.Guid, Havit.EFCoreTests.Model.User> GetGetObjectQuery() => _getObjectQuery;
	public Func<DbContext, System.Guid, CancellationToken, Task<Havit.EFCoreTests.Model.User>> GetGetObjectAsyncQuery() => _getObjectAsyncQuery;
	public Func<DbContext, System.Guid[], IEnumerable<Havit.EFCoreTests.Model.User>> GetGetObjectsQuery() => _getObjectsQuery;
	public Func<DbContext, System.Guid[], IAsyncEnumerable<Havit.EFCoreTests.Model.User>> GetGetObjectsAsyncQuery() => _getObjectsAsyncQuery;
}
